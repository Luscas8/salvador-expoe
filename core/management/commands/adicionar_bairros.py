from django.core.management.base import BaseCommand
from core.models import Bairro

class Command(BaseCommand):
    help = 'Adiciona os bairros que faltam no banco de dados'

    def handle(self, *args, **options):
        self.stdout.write('Adicionando bairros que faltam...')
        
        # Dicionário com as coordenadas de todos os bairros de Salvador
        coordenadas = {
            'Acupe': {'lat': -12.8833, 'lng': -38.4167},
            'Aeroporto': {'lat': -12.9083, 'lng': -38.3333},
            'Águas Claras': {'lat': -12.8833, 'lng': -38.4167},
            'Alto da Terezinha': {'lat': -12.8833, 'lng': -38.4167},
            'Alto das Pombas': {'lat': -12.9833, 'lng': -38.5167},
            'Alto do Cabrito': {'lat': -12.8833, 'lng': -38.4167},
            'Alto do Coqueirinho': {'lat': -12.8833, 'lng': -38.4167},
            'Amaralina': {'lat': -12.9833, 'lng': -38.5167},
            'Areia Branca': {'lat': -12.8833, 'lng': -38.4167},
            'Arenoso': {'lat': -12.8833, 'lng': -38.4167},
            'Arraial do Retiro': {'lat': -12.8833, 'lng': -38.4167},
            'Bairro da Paz': {'lat': -12.8833, 'lng': -38.4167},
            'Baixa de Quintas': {'lat': -12.9714, 'lng': -38.5014},
            'Barbalho': {'lat': -12.9714, 'lng': -38.5014},
            'Barra': {'lat': -13.0087, 'lng': -38.5327},
            'Barreiras': {'lat': -12.8833, 'lng': -38.4167},
            'Barris': {'lat': -12.9714, 'lng': -38.5014},
            'Beiru/Tancredo Neves': {'lat': -12.8833, 'lng': -38.4167},
            'Boa Viagem': {'lat': -12.9714, 'lng': -38.5014},
            'Boa Vista de Brotas': {'lat': -12.9833, 'lng': -38.5167},
            'Boa Vista de São Caetano': {'lat': -12.8833, 'lng': -38.4167},
            'Boca da Mata': {'lat': -12.8833, 'lng': -38.4167},
            'Boca do Rio': {'lat': -13.0087, 'lng': -38.5327},
            'Bom Juá': {'lat': -12.8833, 'lng': -38.4167},
            'Bonfim': {'lat': -12.9714, 'lng': -38.5014},
            'Brotas': {'lat': -12.9833, 'lng': -38.5167},
            'Cabula': {'lat': -12.9833, 'lng': -38.5167},
            'Cabula VI': {'lat': -12.9833, 'lng': -38.5167},
            'Caixa D´Água': {'lat': -12.9714, 'lng': -38.5014},
            'Cajazeiras II': {'lat': -12.8833, 'lng': -38.4167},
            'Cajazeiras IV': {'lat': -12.8833, 'lng': -38.4167},
            'Cajazeiras V': {'lat': -12.8833, 'lng': -38.4167},
            'Cajazeiras VI': {'lat': -12.8833, 'lng': -38.4167},
            'Cajazeiras VII': {'lat': -12.8833, 'lng': -38.4167},
            'Cajazeiras VIII': {'lat': -12.8833, 'lng': -38.4167},
            'Cajazeiras X': {'lat': -12.8833, 'lng': -38.4167},
            'Cajazeiras XI': {'lat': -12.8833, 'lng': -38.4167},
            'Calabar': {'lat': -12.9833, 'lng': -38.5167},
            'Calabetão': {'lat': -12.8833, 'lng': -38.4167},
            'Calçada': {'lat': -12.8833, 'lng': -38.4167},
            'Caminho das Árvores': {'lat': -12.9917, 'lng': -38.4567},
            'Caminho de Areia': {'lat': -12.8833, 'lng': -38.4167},
            'Campinas de Pirajá': {'lat': -12.8833, 'lng': -38.4167},
            'Canabrava': {'lat': -12.8833, 'lng': -38.4167},
            'Candeal': {'lat': -12.9833, 'lng': -38.5167},
            'Canela': {'lat': -12.9833, 'lng': -38.5167},
            'Capelinha': {'lat': -12.8833, 'lng': -38.4167},
            'Cassange': {'lat': -12.8833, 'lng': -38.4167},
            'Castelo Branco': {'lat': -12.8833, 'lng': -38.4167},
            'Centro': {'lat': -12.9714, 'lng': -38.5014},
            'Chame-Chame': {'lat': -12.9833, 'lng': -38.5167},
            'Cidade Nova': {'lat': -12.8833, 'lng': -38.4167},
            'Colinas de Periperi': {'lat': -12.8833, 'lng': -38.4167},
            'Comércio': {'lat': -12.9714, 'lng': -38.5014},
            'Cosme de Farias': {'lat': -12.9833, 'lng': -38.5167},
            'Costa Azul': {'lat': -13.0087, 'lng': -38.5327},
            'Coutos': {'lat': -12.8833, 'lng': -38.4167},
            'Curuzu': {'lat': -12.8833, 'lng': -38.4167},
            'Dois de Julho': {'lat': -12.9833, 'lng': -38.5167},
            'Dom Avelar': {'lat': -12.8833, 'lng': -38.4167},
            'Doron': {'lat': -12.8833, 'lng': -38.4167},
            'Engenho Velho da Federação': {'lat': -12.9833, 'lng': -38.5167},
            'Engenho Velho de Brotas': {'lat': -12.9833, 'lng': -38.5167},
            'Engomadeira': {'lat': -12.8833, 'lng': -38.4167},
            'Fazenda Coutos': {'lat': -12.8833, 'lng': -38.4167},
            'Fazenda Grande do Retiro': {'lat': -12.8833, 'lng': -38.4167},
            'Fazenda Grande I': {'lat': -12.8833, 'lng': -38.4167},
            'Fazenda Grande II': {'lat': -12.8833, 'lng': -38.4167},
            'Fazenda Grande III': {'lat': -12.8833, 'lng': -38.4167},
            'Fazenda Grande IV': {'lat': -12.8833, 'lng': -38.4167},
            'Federação': {'lat': -12.9833, 'lng': -38.5167},
            'Garcia': {'lat': -12.9833, 'lng': -38.5167},
            'Graça': {'lat': -12.9833, 'lng': -38.5167},
            'Granjas Rurais Presidente Vargas': {'lat': -12.8833, 'lng': -38.4167},
            'Horto Florestal': {'lat': -12.8833, 'lng': -38.4167},
            'IAPI': {'lat': -12.8833, 'lng': -38.4167},
            'Imbuí': {'lat': -12.9917, 'lng': -38.4567},
            'Itacaranha': {'lat': -12.8833, 'lng': -38.4167},
            'Itaigara': {'lat': -12.9917, 'lng': -38.4567},
            'Itapuã': {'lat': -12.9833, 'lng': -38.4833},
            'Itinga': {'lat': -12.8833, 'lng': -38.4167},
            'Jaguaripe I': {'lat': -12.8833, 'lng': -38.4167},
            'Jardim Armação': {'lat': -12.8833, 'lng': -38.4167},
            'Jardim Cajazeiras': {'lat': -12.8833, 'lng': -38.4167},
            'Jardim das Margaridas': {'lat': -12.8833, 'lng': -38.4167},
            'Jardim Nova Esperança': {'lat': -12.8833, 'lng': -38.4167},
            'Jardim Santo Inácio': {'lat': -12.8833, 'lng': -38.4167},
            'Lapinha': {'lat': -12.9714, 'lng': -38.5014},
            'Liberdade': {'lat': -12.9833, 'lng': -38.5167},
            'Lobato': {'lat': -12.8833, 'lng': -38.4167},
            'Luiz Anselmo': {'lat': -12.8833, 'lng': -38.4167},
            'Macaúbas': {'lat': -12.8833, 'lng': -38.4167},
            'Mangueira': {'lat': -12.8833, 'lng': -38.4167},
            'Marechal Rondon': {'lat': -12.8833, 'lng': -38.4167},
            'Massaranduba': {'lat': -12.8833, 'lng': -38.4167},
            'Mata Escura': {'lat': -12.8833, 'lng': -38.4167},
            'Matatu': {'lat': -12.8833, 'lng': -38.4167},
            'Mirantes de Periperi': {'lat': -12.8833, 'lng': -38.4167},
            'Monte Serrat': {'lat': -12.9714, 'lng': -38.5014},
            'Moradas da Lagoa': {'lat': -12.8833, 'lng': -38.4167},
            'Mussurunga': {'lat': -12.9917, 'lng': -38.4567},
            'Narandiba': {'lat': -12.8833, 'lng': -38.4167},
            'Nazaré': {'lat': -12.9833, 'lng': -38.5167},
            'Nordeste de Amaralina': {'lat': -12.9833, 'lng': -38.5167},
            'Nova Brasília': {'lat': -12.8833, 'lng': -38.4167},
            'Nova Constituinte': {'lat': -12.8833, 'lng': -38.4167},
            'Nova Esperança': {'lat': -12.8833, 'lng': -38.4167},
            'Nova Sussuarana': {'lat': -12.8833, 'lng': -38.4167},
            'Novo Horizonte': {'lat': -12.8833, 'lng': -38.4167},
            'Novo Marotinho': {'lat': -12.8833, 'lng': -38.4167},
            'Ondina': {'lat': -12.9833, 'lng': -38.5167},
            'Palestina': {'lat': -12.8833, 'lng': -38.4167},
            'Paripe': {'lat': -12.8833, 'lng': -38.4167},
            'Patamares': {'lat': -12.9917, 'lng': -38.4567},
            'Pau da Lima': {'lat': -12.8833, 'lng': -38.4167},
            'Pau Miúdo': {'lat': -12.9714, 'lng': -38.5014},
            'Pelourinho': {'lat': -12.9714, 'lng': -38.5014},
            'Periperi': {'lat': -12.8833, 'lng': -38.4167},
            'Pernambués': {'lat': -12.9833, 'lng': -38.5167},
            'Pero Vaz': {'lat': -12.8833, 'lng': -38.4167},
            'Piatã': {'lat': -12.9917, 'lng': -38.4567},
            'Pirajá': {'lat': -12.8833, 'lng': -38.4167},
            'Pituaçu': {'lat': -12.9917, 'lng': -38.4567},
            'Pituba': {'lat': -12.9917, 'lng': -38.4567},
            'Plataforma': {'lat': -12.8833, 'lng': -38.4167},
            'Porto Seco Pirajá': {'lat': -12.8833, 'lng': -38.4167},
            'Praia Grande': {'lat': -12.8833, 'lng': -38.4167},
            'Resgate': {'lat': -12.8833, 'lng': -38.4167},
            'Retiro': {'lat': -12.8833, 'lng': -38.4167},
            'Ribeira': {'lat': -12.9714, 'lng': -38.5014},
            'Rio Sena': {'lat': -12.8833, 'lng': -38.4167},
            'Rio Vermelho': {'lat': -12.9833, 'lng': -38.4833},
            'Roma': {'lat': -12.8833, 'lng': -38.4167},
            'Saboeiro': {'lat': -12.8833, 'lng': -38.4167},
            'Santa Cruz': {'lat': -12.8833, 'lng': -38.4167},
            'Santa Luzia': {'lat': -12.8833, 'lng': -38.4167},
            'Santa Mônica': {'lat': -12.8833, 'lng': -38.4167},
            'Santo Agostinho': {'lat': -12.9833, 'lng': -38.5167},
            'Santo Antônio': {'lat': -12.9714, 'lng': -38.5014},
            'São Caetano': {'lat': -12.8833, 'lng': -38.4167},
            'São Cristóvão': {'lat': -12.8833, 'lng': -38.4167},
            'São Gonçalo': {'lat': -12.8833, 'lng': -38.4167},
            'São João do Cabrito': {'lat': -12.8833, 'lng': -38.4167},
            'São Marcos': {'lat': -12.8833, 'lng': -38.4167},
            'São Rafael': {'lat': -12.8833, 'lng': -38.4167},
            'São Tomé': {'lat': -12.8833, 'lng': -38.4167},
            'Saramandaia': {'lat': -12.8833, 'lng': -38.4167},
            'Saúde': {'lat': -12.9714, 'lng': -38.5014},
            'Sete de Abril': {'lat': -12.8833, 'lng': -38.4167},
            'Stella Maris': {'lat': -12.9917, 'lng': -38.4567},
            'STIEP': {'lat': -12.9917, 'lng': -38.4567},
            'Sussuarana': {'lat': -12.8833, 'lng': -38.4167},
            'Tororó': {'lat': -12.9833, 'lng': -38.5167},
            'Trobogy': {'lat': -12.8833, 'lng': -38.4167},
            'Uruguai': {'lat': -12.8833, 'lng': -38.4167},
            'Vale das Pedrinhas': {'lat': -12.8833, 'lng': -38.4167},
            'Vale dos Lagos': {'lat': -12.8833, 'lng': -38.4167},
            'Valéria': {'lat': -12.8833, 'lng': -38.4167},
            'Vila Canária': {'lat': -12.8833, 'lng': -38.4167},
            'Vila Laura': {'lat': -12.8833, 'lng': -38.4167},
            'Vila Ruy Barbosa/Jardim Cruzeiro': {'lat': -12.8833, 'lng': -38.4167},
            'Vitória': {'lat': -12.9833, 'lng': -38.5167},
            'Vista Alegre': {'lat': -12.8833, 'lng': -38.4167},
        }
        
        # Adicionar bairros que não existem
        for nome_bairro, coords in coordenadas.items():
            bairro, created = Bairro.objects.get_or_create(
                nome=nome_bairro,
                defaults={
                    'latitude': coords['lat'],
                    'longitude': coords['lng']
                }
            )
            
            if created:
                self.stdout.write(f'Bairro {nome_bairro} criado com sucesso')
            else:
                self.stdout.write(f'Bairro {nome_bairro} já existe')
        
        self.stdout.write('\nTotal de bairros no banco:')
        self.stdout.write(f'- Total: {Bairro.objects.count()}')
        self.stdout.write(f'- Com coordenadas: {Bairro.objects.exclude(latitude__isnull=True).count()}')
        self.stdout.write(f'- Sem coordenadas: {Bairro.objects.filter(latitude__isnull=True).count()}') 